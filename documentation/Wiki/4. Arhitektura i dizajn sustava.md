# Arhitektura sustava

## Opis arhitekture
Arhitektura sustava koristi klijent-poslužitelj model organiziran u tri glavna sloja:

* **Web preglednik (klijent):** Web preglednik služi kao korisničko sučelje za interakciju s aplikacijom. Putem web preglednika korisnik pokreće zahtjeve i šalje podatke poslužitelju te prima i obrađuje odgovore za prikaz traženih informacija. Web preglednik također obrađuje HTML, CSS i JavaScript sadržaj te osigurava ispravno prikazivanje elemenata korisničkog sučelja.

* **Web poslužitelj (backend):** Web poslužitelj djeluje posrednik između klijenta i baze podataka te je odgovoran za obradu dolaznih zahtjeva i slanje odgovora natrag klijentu. Komunikacija se odvija putem RESTful API-ja koristeći HTTP protokol. Ovisno o vrsti zahtjeva web poslužitelj ili dohvaća podatke iz baze podataka ili pohranjuje podatke koje je poslao klijent.

* **Baza podataka:** Baza podataka je glavni sloj za pohranu svih podataka aplikacije. U njoj se čuvaju trajni podaci poput korisničkih informacija te sadržaja i postavki aplikacije. Skoro svi zahtjevi kojima upravlja web poslužitelj uključuju komunikaciju s bazom podataka za čitanje ili pohranjivanje informacija.

## Obrazloženje odabira arhitekture
Stil klijent-poslužitelj s RESTful API-jem odabran je zbog sljedećih prednosti:

**1. Razdvajanje problema:** Klijentska i poslužiteljska strana razvijaju se i održavaju razdvojeno i neovisno jedna o drugoj, što omogućuje učinkovito upravljanje resursima.

**2. Učinkovito rukovanje podacima:** Poslužiteljska strana je pružatelj podataka, dok klijentska strana brine o API-jevima

## Organizacija sustava na visokoj razini
Sustav je organiziran u tri funkcionalno odvojena dijela koji međusobno komuniciraju putem API-ja:

* **Klijent (React aplikacija):** šalje zahtjeve prema poslužitelju

* **Backend (Spring Boot aplikacija):** obrađuje zahtjeve s klijenta i komunicira s bazom

* **Baza podataka:** pohranjuje i vraća podatke koje koristi poslužitelj

## Organizacija aplikacije
* **Poslužiteljski dio:** Ostvaren programskim jezikom Java pomoću alata Spring-Boot radnog okvira. Razvija se u razvojnom okruženju IntelliJ IDEA, koje podržava Spring-Boot alate.

* **Klijentski dio:** Ostvaren programskim jezikom JavaScript pomoću React radnog okvira. Razvija se u razvojnom okruženju WebStorm.

* **Dizajn korisničkog sučelja:** Ostvaren pomoću alata Figma.

Sva razvojna okruženja razvijena su od strane JETBrains-a radi konzistentnosti.

# Baza podataka

## Opis tablica
### Drzava

Predstavlja zemlju porijekla mjesta. Atributi: drzava_id (PK), nazivDrzave (U).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|drzava_id|VARCHAR(10)|Jedinstveni indetifikator svake države|
|nazivDrzave|VARCHAR(50)|Jedinstveni naziv države|

### Mjesto

Predstavlja mjesto iz kojeg je korisnik aplikacije. Tablica je povezana: Many-to-One s Drzava preko drzava_id. Atributi: postBr (PK), nazMjesto, drzava_id (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|postBr|VARCHAR(20)|Jedinstveni poštanski broj mjesta|
|nazMjesto|VARCHAR(50)|Naziv mjesta|
|drzava_id|INTEGER|Identifikator države|

### Korisnik

Predstavlja korisnika aplikacije, uključujući goste i zaposlenike. Sadrži osobne podatke poput imena, email-a, telefonskog broja te njihove uloge u aplikaciji. Tablica je povezana: Many-to-One s Mjesto preko postBr te One-to-Many s Upit, Rezervacija i Recenzija preko korisnik_id. Atributi: korisnik_id (PK), imeKorisnik, prezimeKorisnik, emailKorisnik (U), telefonKorisnik (U), ovlastKorisnik, postBR (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|korisnik_id|VARCHAR(10)|Jedinstveni identifikator svakog korisnika|
|imeKorisnik|VARCHAR(50)|Ime korisnika|
|prezimeKorisnik|VARCHAR(50)|Prezime korisnika|
|emailKorisnik|VARCHAR(50)|Jedinstveni email korisnika|
|telefonKorisnik|VARCHAR(20)|Jedinstveni telefonski broj korisnika|
|ovlastKorisnik|VARCHAR(20)|Ovlast korisnika u aplikaciji|
|postBr|INTEGER|Poštanski broj mjesta iz kojeg je korisnik|

### Soba

Predstavlja sobu hotela. Sadrži podatke poput vrste sobe, cijene i dostupnosti. Tablica je povezana: One-to-Many s RezervirajSobu preko broj_sobe. Atributi: broj_sobe (PK), vrsta, cijena, status.

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|broj_sobe|VARCHAR(5)|Jedinstveni broj svake sobe|
|vrsta|VARCHAR(20)|Vrsta sobe|
|cijena|INTEGER|Cijena sobe|
|status|VARCHAR(20)|Status sobe, je li soba slobodna ili zauzeta|

### Rezervacija

Predstavlja rezervaciju. Tablica je povezana: Many-to-One s Korisnik preko korisnik_id te One-to-Many s Plaćanje, RezervirajSobu i RezervirajSadrzaj preko rezervacija_id. Atributi: rezervacija_id (PK), datumRezerviranja, placeno?, korisnik_id (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|rezervacija_id|VARCHAR(10)|Jedinstveni identifikator svake rezervacije|
|datumRezerviranja|DATE|Datum rezervacije|
|placeno?|VARCHAR(20)|Je li rezervacija plaćena ili nije|
|korisnik_id|INTEGER|Identifikator korisnika koji je napravio rezervaciju|

### Placanje

Predstavlja plaćanje rezervacije. Tablica je povezana: Many-to-One s Rezervacija preko rezervacija_id. Atributi: placanje_id (PK), datumPlacanja, nacinPlacanja, rezervacija_id (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|placanje_id|VARCHAR(10)|Jedinstveni identifikator svakog plaćanja|
|datumPlacanja|DATE|Datum plaćanja|
|nacinPlacanja|VARCHAR(20)|Način plaćanja|
|rezervacija_id|INTEGER|Identifikator rezervacije koja se plaća|

### DodatniSadrzaj

Predstavlja dodatni sadržaj hotela koji se može rezervirati. Sadrži podatke poput: vrsta, cijena, dostupnost i kapacitet dodatnog sadržaja. Tablica je povezana: One-to-Many s RezervirajSadrzaj preko dodatniSadrzaj_id. Atributi: dodatniSadrzaj_id (PK), vrstaDodatniSadrzaj, statusDodatniSadrzaj, cijenaDOdatniSadrzaj, kapacitetDodatniSadrzaj.

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|dodatniSadrzaj_id|VARCHAR(10)|Jedinstveni identifikator svakog dodatnog sadržaja|
|vrstaDodatniSadrzaj|VARCHAR(20)|Vrsta dodatnog sadržaja|
|cijenaDodatniSadrzaj|INTEGER|Cijena sobe|
|statusDodatniSadrzaj|VARCHAR(20)|Status dodatnog sadržaja, je li dodatan sadržaj dostupan ili nije|
|kapacitetDodatniSadrzaj|INTEGER|Kapacitet dodatnog sadržaja|

### Upit

Predstavlja upit gosta za određeni sadržaj ili sobu hotela. Tablica je povezana: Many-to-One ns Korisnik preko korisnik_id i zaposlenik_id. Atributi: upit_id (PK), datumUpit, porukaUpit, korisnik_id (FK), zaposlenik_id (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|upit_id|VARCHAR(10)|Jedinstveni identifikator svakog upita|
|datumUpit|DATE|Datum upita|
|porukaUpit|VARCHAR(500)|Poruka upita|
|korisnik_id|INTEGER|Identifikator korisnika koji je postavio upit|
|zaposlenik_id|INTEGER|Identifikator zaposlenika koji je primio upit|

### Recenzija

Predstavlja recnziju koju gost holela može ostaviti. Tablica je povezana: Many-to-One s Korisnik preko korisnik_id. Atributi: recenzija_id (PK), ocjenaRecenzija, komentarRecenzija, datumRecenzija, korisnik_id (FK).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|recenzija_id|VARCHAR(10)|Jedinstveni identifikator svake recenzije|
|ocjenaRecenzija|INTEGER|Ocjena dana u recenziji|
|komentarRecenzija|VARCHAR(500)|Komentar dan u recenziji|
|datumRecenzija|DATE|Datum recenzije|
|korisnik_id|INTEGER|Identifikator korisnika koji je ostavio recenziju|

### RezervirajSadrzaj

Predstavlja rezervaciju dodatnog sadržaja hotela. Tablica je povezana: Many-to-One s Rezervacija preko rezervacija_id i One-to-Many s DodatniSadrzaj preko dodatniSadrzaj_id. Atributi: rezervacija_id (FK), dodatniSadrzaj_id (FK), datumOdSadrzaj, datumDoSadrzaj. Ključ tablice je par (rezervacija_id, dodatniSadrzaj_id).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|rezervacija_id|INTEGER|Identifikator rezervacije|
|dodatniSadrzaj_id|INTEGER|Identifikator dodatnog sadržaja koji će se rezervirati|
|datumOdSadrzaj|DATE|Datum početka rezervacije dodatnog sadržaja|
|datumDoSadrzaj|DATE|Datum završetka rezervacije dodatnog sadržaja|

### RezervirajSobu

Predstavlja rezervaciju sobe hotela. Tablica je povezana: Many-to-One s Rezervacija preko rezervacija_id i One-to-Many s Soba preko broj_sobe. Atributi: rezervacija_id (FK), broj_sobe (FK), datumOdSoba, datumDoSoba. Ključ tablice je par (rezervacija_id, broj_sobe).

|Atribut|Tip podatka|Opis varijable|
|-|-|-|
|rezervacija_id|INTEGER|Identifikator rezervacije|
|broj_sobe|VARCHAR(5)|Broj sobe koja će se rezervirati|
|datumOdSoba|DATE|Datum početka rezervacije sobe|
|datumDoSoba|DATE|Datum završetka rezervacije sobe|

## Dijagram baze podataka
<img width="900" src="https://github.com/rokoKnin/ProgiG03.3_JuliusMeinl/blob/main/documentation/images/baza_erd.png" />

# Dijagram razreda
# Dinamičko ponašanje aplikacije

## UML dijagrami stanja
## UML dijagrami aktivnosti