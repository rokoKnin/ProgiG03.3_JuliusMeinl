# Ispitivanje komponenti

## KorisnikServiceTests

### 1. Test: Spremanje korisnika s postojećim mjestom i automatskom dodjelom administratorske uloge

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se funkcionalnost metode spremiKorisnika u servisnoj klasi KorisnikService. Test provjerava ispravno spremanje novog korisnika u sustav kada korisnik ima administratorski e-mail i kada mjesto prebivališta već postoji u bazi podataka. Cilj je osigurati da se poslovna logika pravilno izvršava: korisniku se dodjeljuje odgovarajuća uloga (VLASNIK), koristi se postojeće mjesto iz baze (bez dupliciranja), te se naziv mjesta sprema u standardiziranom formatu (lowercase), dok poštanski broj ostaje nepromijenjen. Test također implicitno provjerava integritet veza između korisnika i mjesta.

**2. Ispitni slučaj**

**Ulazni podaci:**
>*  Email korisnika : admin@hotel.com
>* adminEmail: admin@hotel.com
>* Naziv mjesta: Cres
>* Poštanski broj: 51557
>* Država: Hrvatska

**Očekivani rezultati:**
>* Korisniku se dodjeljuje uloga VLASNIK
>* Naziv mjesta se sprema kao lowercase("cres")
>* Poštanski broj ostaje nepromijenjen("51557")
>* Koristi se postojeće mjesto iz baze podataka

**Dobiveni rezultati:**
>* Dodijeljena uloga korisnika: VLASNIK
>* Naziv mjesta: "cres"
>* Poštanski broj: "51557"

**3. Postupak ispitivanja:**
Prije pokretanja ispitivanja mockiraju se repozitoriji KorisnikRepository, MjestoRepository i DrzavaRepository kako bi se simuliralo ponašanje baze podataka bez korištenja stvarne baze. Zatim se ručno postavlja konfiguracijska vrijednost adminEmail potrebna za pravilno izvođenje poslovne logike u servisnoj klasi. Nakon toga pripremaju se testni objekti Korisnik, Mjesto i Drzava s unaprijed definiranim vrijednostima koje predstavljaju ulazne podatke ispitnog slučaja. Simulira se stanje baze podataka u kojem mjesto već postoji, tako da repozitorij za mjesta vraća postojeći zapis. Potom se poziva metoda spremiKorisnika nad servisom KorisnikService. Na kraju se dobiveni rezultati provjeravaju pomoću JUnit assercija te se na temelju usporedbe očekivanih i dobivenih rezultata utvrđuje ishod ispitivanja.

![1 1](https://github.com/user-attachments/assets/beb6b3ae-9855-4a0d-8d46-a43f592d7437)

*Slika 6.1.1*



### 2. Test: Spremanje korisnika s novim mjestom

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se funkcionalnost spremanja novog korisnika u sustav u slučaju kada korisnik nema administratorsku e-mail adresu te kada mjesto prebivališta ne postoji u bazi podataka. Cilj testa je provjeriti ispravnost poslovne logike unutar servisne klase KorisnikService, uključujući dodjelu odgovarajuće uloge korisniku i ispravno spremanje novog mjesta.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* E-mail korisnika: test@gmail.com
>* Konfiguracijska vrijednost adminEmail: admin@hotel.com
>* Naziv mjesta: Cres
>* Poštanski broj: 51557
>* Država: Hrvatska

**Očekivani rezultati:**
>* Korisniku se dodjeljuje uloga REGISTRIRAN
>* Naziv mjesta sprema se u malim slovima ("cres")
>* Poštanski broj ostaje nepromijenjen ("51557")
>* Kreira se i sprema novo mjesto u bazu podataka

**Dobiveni rezultati:**

>* Dodijeljena uloga korisnika: REGISTRIRAN
>* Naziv mjesta: "cres"
>* Poštanski broj: "51557"

**3. Postupak ispitivanja:** Prije pokretanja ispitivanja mockiraju se repozitoriji KorisnikRepository, MjestoRepository i DrzavaRepository kako bi se simuliralo ponašanje baze podataka. Zatim se ručno postavlja konfiguracijska vrijednost adminEmail, te se pripremaju testni objekti Korisnik, Mjesto i Drzava s unaprijed definiranim vrijednostima. Simulira se stanje baze podataka u kojem traženo mjesto ne postoji, pri čemu repozitorij za mjesta vraća prazan rezultat. Na kraju se dobiveni rezultati provjeravaju pomoću JUnit assercija te se na temelju usporedbe očekivanih i dobivenih rezultata utvrđuje uspješnost ispitivanja.

![1 2](https://github.com/user-attachments/assets/d73e9011-f2b4-4398-bef6-5808baa9d49c)

*Slika 6.1.2*


### 3. Test: Promjena uloge korisnika s nepostojećim ID-jem

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se funkcionalnost promjene uloge korisnika u sustavu u slučaju kada korisnik s navedenim identifikatorom ne postoji u bazi podataka. Cilj testa je provjeriti ispravno rukovanje greškama unutar metode updateRole u servisnoj klasi KorisnikService.

**2. Ispitni slučaj**

**Ulazni podaci:**
>* ID korisnika: 1
>* Nova uloga: "VLASNIK"

**Očekivani rezultati:**
>* Metoda updateRole baca RuntimeException
>* Poruka iznimke glasi: "Korisnik s ID 1 ne postoji"

**Dobiveni rezultati:**
>* Bačena je RuntimeException
>* Poruka iznimke: "Korisnik s ID 1 ne postoji"

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockira se repozitorij KorisnikRepository kako bi se simuliralo stanje baze podataka u kojem korisnik s navedenim identifikatorom ne postoji. Repozitorij je podešen da za traženi ID vrati prazan rezultat. Zatim se poziva metoda updateRole nad servisom KorisnikService s definiranim ulaznim parametrima. Tijekom izvođenja metode očekuje se bacanje iznimke, što se provjerava pomoću JUnit mehanizma assertThrows. Na kraju se provjerava poruka iznimke te se na temelju dobivenih rezultata utvrđuje uspješnost ispitivanja.

![1 3](https://github.com/user-attachments/assets/003928b0-d51e-4d04-8112-f75902ae51c4)

*Slika 6.1.3*

## RecenzijaServiceTests

### 1. Test: Uspješno spremanje recenzije

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se funkcionalnost spremanja nove recenzije u sustav putem metode spremiRecenziju u servisnoj klasi RecenzijaService. Test provjerava ispravno povezivanje recenzije s postojećim korisnikom te pravilno spremanje ocjene i komentara.

**2. Ispitni slučaj**

**Ulazni podaci:**
>* E-mail korisnika: test@gmail.com
>* Ocjena recenzije: 5
>* Komentar recenzije: "Odlično"

**Očekivani rezultati:**
>* Recenzija se uspješno sprema u sustav
>* Ocjena recenzije ima vrijednost 5
>* Komentar recenzije odgovara unesenom tekstu
>* Recenzija je povezana s ispravnim korisnikom

**Dobiveni rezultati:**
>* Ocjena recenzije: 5
>* Komentar recenzije: "Odlično"
>* Recenzija je povezana s korisnikom test@gmail.com


**3. Postupak ispitivanja:** Prije pokretanja ispitivanja mockiraju se repozitoriji RecenzijaRepository i KorisnikRepository kako bi se simuliralo ponašanje baze podataka bez korištenja stvarne baze. Repozitorij korisnika podešen je tako da za zadanu e-mail adresu vrati postojećeg korisnika. Nakon toga pripremaju se ulazni podaci u obliku objekta RecenzijaRequestDTO, koji sadrži ocjenu i komentar recenzije. Zatim se poziva metoda spremiRecenziju nad servisom RecenzijaService. Na kraju se dobiveni rezultat provjerava pomoću JUnit assercija te se na temelju usporedbe očekivanih i dobivenih rezultata utvrđuje uspješnost ispitivanja.

![2 1](https://github.com/user-attachments/assets/1f55b245-fc1c-4671-9996-e979867962b3)

*Slika 6.1.4*

### 2. Test: Spremanje recenzije s nepostojećim korisnikom

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se ponašanje metode spremiRecenziju u servisnoj klasi RecenzijaService u slučaju kada korisnik s navedenom e-mail adresom ne postoji u sustavu. Cilj testa je provjeriti ispravno rukovanje greškama i vraćanje odgovarajućeg HTTP statusa.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* E-mail korisnika: test@gmail.com

>* Podaci recenzije: prazan RecenzijaRequestDTO

**Očekivani rezultati:**

>* Metoda spremiRecenziju baca ResponseStatusException

>* HTTP status iznimke je 404 NOT FOUND

**Dobiveni rezultati:**

>* Bačena je ResponseStatusException

>* HTTP status iznimke: 404 NOT FOUND

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockira se repozitorij KorisnikRepository kako bi se simuliralo stanje baze podataka u kojem korisnik s navedenom e-mail adresom ne postoji. Repozitorij je podešen da za traženu e-mail adresu vrati prazan rezultat. Zatim se poziva metoda spremiRecenziju nad servisom RecenzijaService s definiranim ulaznim podacima. Tijekom izvođenja metode očekuje se bacanje iznimke tipa ResponseStatusException, što se provjerava pomoću JUnit assercije. Na kraju se provjerava HTTP status iznimke te se na temelju dobivenih rezultata utvrđuje uspješnost ispitivanja.

![2 2](https://github.com/user-attachments/assets/cb8ef24e-df9c-4195-a9a5-3952f0968776)

*Slika 6.1.5*

## RezervacijaServiceTests

### 1. Test: Uspješno kreiranje rezervacije

**1. Funkcionalnost koju testiramo:**  Ovim testom ispituje se funkcionalnost kreiranja nove rezervacije u sustavu putem metode kreirajRezervaciju u servisnoj klasi RezervacijaService. Test provjerava ispravno povezivanje rezervacije s postojećim korisnikom te uspješno spremanje rezervacije u sustav.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* ID korisnika: 1

>* Postojeći korisnik u sustavu

**Očekivani rezultati:**

>* Rezervacija se uspješno kreira i sprema u sustav

>* Metoda kreirajRezervaciju vraća ID novokreirane rezervacije

>* Vraćeni ID rezervacije ima vrijednost 2

**Dobiveni rezultati:**

>* Vraćeni ID rezervacije: 2

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockiraju se repozitoriji RezervacijaRepository i KorisnikRepository kako bi se simuliralo ponašanje baze podataka bez korištenja stvarne baze. Repozitorij korisnika podešen je tako da za zadani identifikator korisnika vrati postojeći zapis. Repozitorij rezervacija konfiguriran je da prilikom spremanja vrati objekt rezervacije s definiranim identifikatorom. Nakon toga poziva se metoda kreirajRezervaciju nad servisom RezervacijaService. Na kraju se dobiveni rezultat provjerava pomoću JUnit assercije te se na temelju dobivenog rezultata utvrđuje uspješnost ispitivanja.

![3 1](https://github.com/user-attachments/assets/b9959496-6e66-4709-bfa5-01ba1acb75d0)

*Slika 6.1.6*


### 2. Test: Ažuriranje rezervacije s nepostojećim ID-jem

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se ponašanje metode azurirajRezervaciju u servisnoj klasi RezervacijaService u slučaju kada rezervacija s navedenim identifikatorom ne postoji u sustavu. Cilj testa je provjeriti ispravno rukovanje greškama i vraćanje odgovarajuće poruke iznimke.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* ID rezervacije: 1

>* Objekt rezervacije: prazan Rezervacija

**Očekivani rezultati:**

>* Metoda azurirajRezervaciju baca IllegalArgumentException

>* Poruka iznimke glasi: "Rezervacija ne postoji"

**Dobiveni rezultati:**

>* Bačena je IllegalArgumentException

>* Poruka iznimke: "Rezervacija ne postoji"

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockira se repozitorij RezervacijaRepository kako bi se simuliralo stanje baze podataka u kojem rezervacija s navedenim identifikatorom ne postoji. Repozitorij je podešen da za bilo koji ID vrati prazan rezultat (Optional.empty()). Zatim se poziva metoda azurirajRezervaciju nad servisom RezervacijaService s definiranim ulaznim podacima. Tijekom izvođenja metode očekuje se bacanje iznimke tipa IllegalArgumentException, što se provjerava pomoću JUnit assercije. Na kraju se provjerava poruka iznimke te se na temelju dobivenih rezultata utvrđuje uspješnost ispitivanja.

![3 2](https://github.com/user-attachments/assets/6844af0a-30a2-41c3-9fa9-ddc089ede6e7)

*Slika 6.1.7*


## SobaServiceTests

### 1. Test: Dohvat sobe po nepostojećem ID-ju

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se ponašanje metode getSobaById u servisnoj klasi SobaService u slučaju kada soba s navedenim identifikatorom ne postoji u sustavu. Cilj testa je provjeriti ispravno rukovanje greškama i vraćanje odgovarajuće poruke iznimke.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* ID sobe: 1

**Očekivani rezultati:**

>* Metoda getSobaById baca RuntimeException

>* Poruka iznimke glasi: "Soba s ID 1 nije pronađena."

**Dobiveni rezultati:**

>* Bačena je RuntimeException
>* Poruka iznimke: "Soba s ID 1 nije pronađena."

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockira se repozitorij SobaRepository kako bi se simuliralo stanje baze podataka u kojem soba s navedenim identifikatorom ne postoji. Repozitorij je podešen da za traženi ID vrati prazan rezultat (Optional.empty()). Zatim se poziva metoda getSobaById nad servisom SobaService s definiranim ID-jem sobe. Tijekom izvođenja metode očekuje se bacanje iznimke tipa RuntimeException, što se provjerava pomoću JUnit assercije. Na kraju se provjerava poruka iznimke te se na temelju dobivenih rezultata utvrđuje uspješnost ispitivanja.

![4 1](https://github.com/user-attachments/assets/0d3d4696-4b6a-4d7d-a916-9d81f1746f1d)

*Slika 6.1.8*


### 2. Test: Dohvat sobe kada nema dostupnih soba

**1. Funkcionalnost koju testiramo:** Ovim testom ispituje se ponašanje metode dohvatiSobe u servisnoj klasi SobaService kada za traženi period i kriterije nema dostupnih soba. Cilj testa je provjeriti ispravno rukovanje situacijom u kojoj nije moguće rezervirati sobu te vraćanje odgovarajućeg HTTP statusa.

**2. Ispitni slučaj**

**Ulazni podaci:**

>* Period rezervacije: od danas do 5 dana u budućnosti

>* Vrsta sobe: DVOKREVETNA_TWIN

>* Balkon: false

>* Pogled na more: true

**Očekivani rezultati:**

>* Metoda dohvatiSobe baca ResponseStatusException

>* HTTP status iznimke je 409 CONFLICT

**Dobiveni rezultati:**

>* Bačena je ResponseStatusException

>* HTTP status iznimke: 409 CONFLICT

**3. Postupak ispitivanja:** Prije provođenja ispitivanja mockiraju se repozitoriji RezervirajSobuRepository i SobaRepository. Repozitorij rezervacija soba vraća listu nedostupnih soba za zadani period, dok repozitorij soba simulira da nema dostupnih soba koje odgovaraju traženim kriterijima. Zatim se pripremaju ulazni podaci u obliku RezervacijaRequestDTO i SobaRequestDTO s definiranim periodom i željenim karakteristikama sobe. Nakon toga se poziva metoda dohvatiSobe nad servisom SobaService. Tijekom izvođenja metode očekuje se bacanje iznimke tipa ResponseStatusException, što se provjerava pomoću JUnit assercije. Na kraju se provjerava HTTP status iznimke te se na temelju dobivenih rezultata utvrđuje uspješnost ispitivanja.


![4 2](https://github.com/user-attachments/assets/ee74df2f-95b1-42f5-afa3-8b11f454819f)

*Slika 6.1.9*

## Prikaz svih izvršenih testova

![Uspjesni testovi](https://github.com/user-attachments/assets/a1c4c2a7-a704-4312-b3bc-2aa5820199bd)

*Slika 6.1.10*


***




# Ispitivanje sustava



### 1. Test: Brisanje sobe


**1. Ulazi:**

>* Postojeća soba u sustavu
>* Korisnik je prijavljen i ima ovlasti za brisanje sobe


**2. Koraci ispitivanja:**

>* Otvoriti web aplikaciju i postaviti veličinu prozora

>* Navigirati do popisa soba

>* Postaviti pokazivač miša na gumb s dodatnim opcijama za sobu

>* Kliknuti na opciju Brisanje sobe

>* Potvrditi dijaloški prozor za brisanje (OK)

![koraci izvrsavanja 1](https://github.com/user-attachments/assets/38087f57-21c0-4e56-9505-2be748c9d924)

*Slika 6.2.1*


**3. Očekivani izlaz:**

>* Sustav prikazuje dijalog za potvrdu brisanja sobe

>* Nakon potvrde, odabrana soba se briše iz sustava

>* Soba se više ne prikazuje na popisu soba

**4. Dobiveni izlaz:**

![log 1](https://github.com/user-attachments/assets/50072f6f-82df-424a-adcc-963e34c7bc09)


*Slika 6.2.2*



### 2. Test: Dodavanje sobe

**1. Ulazi:**

>* Korisnik je prijavljen i ima ovlasti za dodavanje sobe

>* Postavke sobe (npr. dvokrevetna soba)

**2. Koraci ispitivanja:**

>* Otvoriti web aplikaciju i postaviti veličinu prozora

>* Navigirati do modula za upravljanje sobama

>* Kliknuti na gumb Nova soba

>* Pričekati da se obrazac za unos prikaže

>* Unijeti broj sobe u polje za unos

>* Označiti odgovarajuće opcije (npr. dvokrevetna soba)

>* Kliknuti gumb za spremanje

![koraci 2](https://github.com/user-attachments/assets/f38afd3f-acd2-45fd-ba93-d63ab6fc0756)

*Slika 6.2.3*

**3. Očekivani izlaz:**

>* Sustav prikazuje obrazac za dodavanje nove sobe

>* Uneseni podaci se prihvaćaju bez greške

>* Nova soba se uspješno sprema u sustav

>* Nova soba je vidljiva na popisu soba


**4. Dobiveni izlaz:**

![log 2](https://github.com/user-attachments/assets/3c4a038d-cd52-4bb4-ad10-7ef8e48f0556)

*Slika 6.2.4*

### 3. Test: Filtriranje rezervacija

**1. Ulazi:**

>* Početni datum filtriranja: 2026-01-22

>* Završni datum filtriranja: 2026-01-28


**2. Koraci ispitivanja:**

>* Otvoriti web-aplikaciju za upravljanje rezervacijama

>* Kliknuti na gumb za otvaranje filtera rezervacija

>* U polje za početni datum unijeti 2026-01-22

>* U polje za završni datum unijeti 2026-01-28

>* Kliknuti na gumb za primjenu filtera


![Koraci](https://github.com/user-attachments/assets/60fe8859-f2c2-4ad8-ab00-a5e6a5e61f3e)

*Slika 6.2.5*

**3. Očekivani izlaz:**

>* Sustav prihvaća unesene datume bez greške

>* Prikazuju se samo rezervacije čiji se datum nalazi unutar zadanog raspona (22.01.2026 – 28.01.2026)

>* Rezervacije izvan tog raspona nisu prikazane


**4. Dobiveni izlaz:**

![log](https://github.com/user-attachments/assets/521268fd-9296-431e-ab4b-0447b97a8782)

*Slika 6.2.6*


### 4. Test: Unos recenzije

**1. Ulazi:**

>* Dostupna navigacijska stavka Recenzije

>* Vidljivo polje za unos recenzije

**2. Koraci ispitivanja:**

>* Otvoriti web aplikaciju u pregledniku.

>* Podesiti veličinu prozora preglednika.

>* Kliknuti na navigacijsku stavku Recenzije.

>* Kliknuti u polje za unos recenzije.

>* Unijeti tekst „Sve je u redu.” u polje za recenziju.

>* Kliknuti na gumb za slanje recenzije.

![Koraci](https://github.com/user-attachments/assets/f3947fc4-c336-46ce-9772-8c8238c47878)

*Slika 6.2.7*

**3. Očekivani izlaz:**

>* Forma za unos recenzije je vidljiva i aktivna.

>* Tekst recenzije je uspješno unesen u polje.

>* Nakon klika na gumb za slanje, recenzija se prihvaća i obrađuje bez greške.

>* Sustav ne prikazuje poruke o pogrešci.


**4. Dobiveni izlaz:**

![log](https://github.com/user-attachments/assets/161a85be-6b6f-4917-8c3e-ca7e2cd49caf)

*Slika 6.2.8*

### 5. Test:

**1. Ulazi:**

>* Prijavljen korisnik s administratorskim ovlastima

>* Dostupna opcija Uređivanje dodatnog sadržaja

**2. Koraci ispitivanja:**

>* Otvoriti web aplikaciju u pregledniku.

>* Podesiti veličinu prozora preglednika.

>* Otvoriti sekciju za uređivanje dodatnog sadržaja.

>* Kliknuti na odgovarajući gumb za uređivanje.

>* Privremeno ugasiti dodatan sadržaj

>* Spremiti promjene

![koraci](https://github.com/user-attachments/assets/e5a95b4f-5c9e-43ee-ac5b-fea3bec5785b)

*Slika 6.2.9*


**3. Očekivani izlaz:**

>* Sekcija za uređivanje dodatnog sadržaja se ispravno otvara.

>* Promjene se uspješno spremaju bez greške.

>* Sustav ne prikazuje poruke o pogrešci.

**4. Dobiveni izlaz:**


![Log](https://github.com/user-attachments/assets/75450d5e-96cd-43f0-bbb2-749d7828844e)

*Slika 6.2.10*